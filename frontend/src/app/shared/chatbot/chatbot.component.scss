/* ===== Paleta Starbucks ===== */
$sbx-green: #00754a;
$sbx-green-900: #1e3932;
$sbx-cream: #faf7f2;
$sbx-cream-2: #f6f0e8;

/* ===== Botón flotante ===== */
.chatbot-boton {
  position: fixed; bottom: 2rem; right: 2rem; z-index: 9999;
  border: none; border-radius: 999px;
  width: 56px; height: 56px; padding: 0;
  display: inline-flex; align-items: center; justify-content: center;
  background: $sbx-green; color: #fff; box-shadow: 0 10px 22px rgba(0,0,0,.18);
  .p-button-icon { font-size: 1.2rem; }
  .p-button-label { margin-left: .4rem; font-weight: 800; letter-spacing: .2px; }
  &:hover { filter: brightness(.95); }
}

/* ===== Popup (mismas dimensiones) ===== */
.chatbot-popup {
  position: fixed; bottom: 6rem; right: 2rem;
  width: 360px; height: 450px;
  background: linear-gradient(180deg, #fff, $sbx-cream);
  border: 1px solid #e7ebe9; border-radius: 16px;
  box-shadow: 0 24px 60px rgba(30,57,50,.18);
  display: flex; flex-direction: column; z-index: 10000; overflow: hidden;
}

/* Header */
.chatbot-header {
  background: linear-gradient(180deg, #0a3d2e, $sbx-green-900);
  color: #fff; padding: .75rem .9rem;
  font-weight: 800; letter-spacing: .3px;
  display: flex; align-items: center; justify-content: space-between;
}
.chatbot-close {
  background: rgba(255,255,255,.18); color: #fff; border: none;
  width: 28px; height: 28px; border-radius: 8px; cursor: pointer;
  line-height: 1; font-size: 1rem;
  &:hover { background: rgba(255,255,255,.28); }
}

/* Caja principal */
.chat-box { display: flex; flex-direction: column; height: 400px; }

/* Área de mensajes */
.mensajes {
  flex: 1; overflow-y: auto; padding: .8rem .9rem; background: $sbx-cream;
  &::-webkit-scrollbar { width: 8px; }
  &::-webkit-scrollbar-thumb { background: rgba(0,117,74,.35); border-radius: 8px; }
  &::-webkit-scrollbar-track { background: rgba(0,0,0,.04); border-radius: 8px; }
}

/* Burbujas */
.mensaje-yo, .mensaje-ia {
  max-width: 85%;
  padding: .6rem .75rem;
  margin: .35rem 0;
  line-height: 1.45;
  font-size: .95rem;
  word-wrap: break-word;
  border-radius: 14px;
  box-shadow: 0 2px 6px rgba(241, 238, 238, 0.06);
}

/* Usuario: verde, a la derecha */
.mensaje-yo {
  margin-left: auto; color: #fff; background: $sbx-green;
  border-radius: 14px 14px 4px 14px; position: relative;
  &::after {
    content: ""; position: absolute; right: -2px; bottom: 0;
    width: 10px; height: 10px; background: $sbx-green;
    clip-path: polygon(0 0, 100% 0, 0 100%); border-radius: 2px;
  }
}

/* IA: blanca con borde suave, a la izquierda */
.mensaje-ia {
  margin-right: auto; color: $sbx-green-900; background: #fff; border: 1px solid #e8ecea;
  border-radius: 14px 14px 14px 4px; position: relative;
  &::after {
    content: ""; position: absolute; left: -2px; bottom: 0;
    width: 10px; height: 10px; background: #fff; border-left: 1px solid #e8ecea; border-bottom: 1px solid #e8ecea;
    clip-path: polygon(100% 0, 100% 100%, 0 100%); border-radius: 2px;
  }
  :where(p, li) { margin: .25rem 0; }
  strong { color: $sbx-green-900; }
  code { background: #f1f5f4; padding: .1rem .35rem; border-radius: 4px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }
  pre {
    background: #0b3b2f; color: #e6ffef;
    padding: .65rem .8rem; border-radius: 10px; overflow: auto; font-size: .9rem;
  }
  ul, ol { padding-left: 1.25rem; }
}

/* Input + botón enviar */
.chat-input {
  background: #fff; border-top: 1px solid #e8eaea;
  padding: .6rem; display: flex; gap: .5rem; align-items: center;

  /* ✅ Texto blanco en input/textarea, caret y placeholder claros */
  input.p-inputtext,
  textarea {
    flex: 1;
    border: 1px solid #d1d5db;
    border-radius: 999px;
    padding: .55rem .9rem;
    font-size: .95rem;
    color: #fff !important;     /* texto */
    caret-color: #fff;           /* cursor */
    outline: none;
    &:focus { border-color: $sbx-green; box-shadow: 0 0 0 3px rgba(255,255,255,0.12); }
  }
  input.p-inputtext::placeholder,
  textarea::placeholder {
    color: rgba(255,255,255,.7);
  }

  .p-button {
    background: $sbx-green; border: none; width: 38px; height: 38px; border-radius: 50%;
    display: inline-flex; align-items: center; justify-content: center;
    &:disabled { opacity: .6; }
    &:hover { filter: brightness(.96); }
    .pi { transform: translateX(1px) rotate(-8deg); }
  }
}

/* Fallbacks */
.chat-box .mensaje-yo, .chat-box .mensaje-ia { text-align: left; }
